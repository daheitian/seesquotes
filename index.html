<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ä¿¡å· | SEES-QUOTATION</title>
    <style>
        /* æ ·å¼å®Œæ•´ä¿ç•™ï¼ˆä¸æ‚¨åŸç‰ˆ 100% ä¸€è‡´ï¼‰ */
        :root { --bg-primary: #0a0a0a; --bg-secondary: #141414; --bg-card: #1a1a1a; --bg-card-hover: #222222; --text-primary: #e7e9ea; --text-secondary: #8899a6; --text-muted: #536471; --accent: #1d9bf0; --border: #2f3336; --shadow: rgba(0, 0, 0, 0.5); }
        [data-theme="light"] { --bg-primary: #f7f9fa; --bg-secondary: #ffffff; --bg-card: #ffffff; --bg-card-hover: #f7f9fa; --text-primary: #0f1419; --text-secondary: #536471; --text-muted: #8899a6; --accent: #1d9bf0; --border: #eff3f4; --shadow: rgba(0, 0, 0, 0.08); }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; -webkit-font-smoothing: antialiased; min-height: 100vh; }
        header { position: sticky; top: 0; background: rgba(10, 10, 10, 0.85); backdrop-filter: blur(20px); z-index: 100; padding: 16px 0; border-bottom: 1px solid var(--border); }
        [data-theme="light"] header { background: rgba(255, 255, 255, 0.85); }
        .header-inner { max-width: 680px; margin: 0 auto; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; }
        .logo { font-size: 18px; font-weight: 700; color: var(--text-primary); text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .logo span { color: var(--accent); }
        nav { display: flex; align-items: center; gap: 8px; background: var(--bg-card); padding: 6px; border-radius: 100px; border: 1px solid var(--border); }
        nav a { padding: 8px 16px; border-radius: 100px; font-size: 14px; font-weight: 500; color: var(--text-secondary); text-decoration: none; transition: all 0.2s ease; }
        nav a:hover, nav a.active { color: var(--text-primary); background: var(--bg-card-hover); }
        .controls { display: flex; align-items: center; gap: 8px; }
        .btn-icon { width: 36px; height: 36px; border-radius: 50%; border: 1px solid var(--border); background: var(--bg-card); color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; }
        .btn-icon:hover { background: var(--bg-card-hover); color: var(--text-primary); }
        .btn-icon:disabled { opacity: 0.5; cursor: not-allowed; }
        main { max-width: 680px; margin: 0 auto; padding: 40px 20px; }
        .hero { text-align: center; padding: 60px 0 40px; }
        .hero-icon { font-size: 48px; margin-bottom: 16px; }
        .hero h1 { font-size: 28px; font-weight: 700; margin-bottom: 12px; color: var(--text-primary); letter-spacing: 2px; }
        .hero p { font-size: 15px; color: var(--text-secondary); max-width: 400px; margin: 0 auto; line-height: 1.7; }
        .random-btn { display: inline-flex; align-items: center; gap: 8px; margin-top: 24px; padding: 12px 24px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 100px; color: var(--text-primary); font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.2s ease; }
        .random-btn:hover { background: var(--bg-card-hover); transform: translateY(-2px); }
        .stats { display: flex; align-items: center; justify-content: center; gap: 24px; margin: 32px 0; padding: 16px; background: var(--bg-card); border-radius: 16px; border: 1px solid var(--border); }
        .stat-item { text-align: center; }
        .stat-value { font-size: 24px; font-weight: 700; color: var(--text-primary); }
        .stat-label { font-size: 12px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; margin-top: 4px; }
        .status { display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 13px; color: var(--text-muted); margin-bottom: 24px; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #00ba7c; animation: pulse 2s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .status.syncing .status-dot { background: var(--accent); animation: spin 1s linear infinite; }
        .status.error .status-dot { background: #f4212e; animation: none; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .posts { display: flex; flex-direction: column; gap: 16px; }
        .post { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 20px; transition: all 0.2s ease; animation: fadeIn 0.4s ease-out; cursor: pointer; }
        .post:hover { background: var(--bg-card-hover); transform: translateY(-2px); box-shadow: 0 8px 32px var(--shadow); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .post-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .post-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-size: 14px; color: white; font-weight: 600; flex-shrink: 0; }
        .post-meta { flex: 1; min-width: 0; }
        .post-author { font-weight: 600; font-size: 15px; color: var(--text-primary); }
        .post-time { font-size: 13px; color: var(--text-muted); }
        .post-content { font-size: 15px; line-height: 1.75; color: var(--text-primary); white-space: pre-wrap; word-wrap: break-word; }
        .post-images { margin-top: 12px; display: grid; gap: 8px; }
        .post-images.single { grid-template-columns: 1fr; }
        .post-images.double { grid-template-columns: repeat(2, 1fr); }
        .post-images.multiple { grid-template-columns: repeat(2, 1fr); }
        .post-images img { width: 100%; border-radius: 12px; object-fit: cover; aspect-ratio: 16/10; transition: transform 0.2s ease; }
        .post-tags { margin-top: 12px; display: flex; flex-wrap: wrap; gap: 8px; }
        .tag { padding: 4px 10px; background: rgba(29, 155, 240, 0.1); color: var(--accent); font-size: 12px; border-radius: 100px; }
        .loading { text-align: center; padding: 60px 0; }
        .loading-spinner { width: 40px; height: 40px; border: 3px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 16px; }
        .loading p { color: var(--text-secondary); font-size: 14px; }
        .error { text-align: center; padding: 40px 20px; background: var(--bg-card); border-radius: 16px; border: 1px solid var(--border); }
        .error-icon { font-size: 48px; margin-bottom: 16px; }
        .error h3 { font-size: 18px; margin-bottom: 8px; color: var(--text-primary); }
        .error p { color: var(--text-secondary); font-size: 14px; margin-bottom: 20px; }
        .retry-btn { padding: 10px 24px; background: var(--accent); color: white; border: none; border-radius: 100px; font-size: 14px; font-weight: 500; cursor: pointer; transition: opacity 0.2s; }
        .retry-btn:hover { opacity: 0.9; }
        .empty { text-align: center; padding: 60px 20px; color: var(--text-secondary); }
        .empty-icon { font-size: 48px; margin-bottom: 16px; }
        footer { text-align: center; padding: 40px 20px; border-top: 1px solid var(--border); }
        footer p { font-size: 13px; color: var(--text-muted); }
        footer a { color: var(--text-secondary); text-decoration: none; }
        footer a:hover { color: var(--accent); }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); display: flex; align-items: center; justify-content: center; z-index: 1000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal { background: var(--bg-card); border-radius: 20px; max-width: 560px; width: 90%; max-height: 80vh; overflow-y: auto; transform: scale(0.9); transition: transform 0.3s ease; }
        .modal-overlay.active .modal { transform: scale(1); }
        .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; border-bottom: 1px solid var(--border); }
        .modal-title { font-size: 16px; font-weight: 600; }
        .modal-close { width: 32px; height: 32px; border-radius: 50%; border: none; background: var(--bg-card-hover); color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; }
        .modal-close:hover { color: var(--text-primary); }
        .modal-body { padding: 20px; }
        .about-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; padding: 32px; }
        .about-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; }
        .about-avatar { width: 72px; height: 72px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-size: 28px; color: white; font-weight: 700; }
        .about-info h2 { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
        .about-info p { font-size: 14px; color: var(--text-secondary); }
        .about-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px; }
        .about-tag { padding: 6px 14px; background: var(--bg-card-hover); border: 1px solid var(--border); border-radius: 100px; font-size: 13px; color: var(--text-secondary); }
        .about-content { display: flex; flex-direction: column; gap: 12px; }
        .about-item { display: flex; align-items: flex-start; gap: 12px; font-size: 15px; line-height: 1.7; color: var(--text-primary); }
        .about-item span { font-size: 18px; flex-shrink: 0; }
        @media (max-width: 640px) {
            nav { display: none; }
            .hero { padding: 40px 0 32px; }
            .hero h1 { font-size: 22px; }
            .stats { gap: 16px; }
            .stat-value { font-size: 20px; }
            .post { padding: 16px; }
            .about-card { padding: 24px; }
            .about-avatar { width: 56px; height: 56px; font-size: 22px; }
        }
    </style>
    <base target="_blank">
</head>
<body>
    <!-- HTML ç»“æ„ä¸å˜ -->
    <header>
        <div class="header-inner">
            <a href="#" class="logo">å°ä¿¡å·<span>.</span></a>
            <nav>
                <a href="#" class="active" data-page="home">è§å®¤å¼•å·</a>
                <a href="https://buercrock.notion.site/daheitian-web-fe688e111f9e47a097e422e3eb8ae35c" target="_blank">ä¸»é¡µ</a>
                <a href="#" data-page="about">å…³äº</a>
            </nav>
            <div class="controls">
                <button class="btn-icon" id="refreshBtn" title="åˆ·æ–°"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg></button>
                <button class="btn-icon" id="themeBtn" title="åˆ‡æ¢ä¸»é¢˜">
                    <svg id="sunIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                    <svg id="moonIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
                </button>
            </div>
        </div>
    </header>

    <main>
        <div id="homePage">
            <section class="hero">
                <div class="hero-icon">ğŸ’­</div>
                <h1>SEES-QUOTATION</h1>
                <p>ä¸€äº›é‡‘å¥ä¸€äº›æ€è€ƒ ä¸€äº›ä¼˜è´¨ä¿¡æ¯æº</p>
                <button class="random-btn" id="randomBtn"><span>ğŸ²</span><span>éšæœºä¸€æ¡</span></button>
            </section>
            <div class="stats">
                <div class="stat-item"><div class="stat-value" id="postCount">-</div><div class="stat-label">åŠ¨æ€</div></div>
                <div class="stat-item"><div class="stat-value" id="updateTime">-</div><div class="stat-label">æ›´æ–°</div></div>
            </div>
            <div class="status" id="status"><span class="status-dot"></span><span id="statusText">æ­£åœ¨è¿æ¥...</span></div>
            <div class="posts" id="posts"><div class="loading"><div class="loading-spinner"></div><p>æ­£åœ¨åŠ è½½åŠ¨æ€...</p></div></div>
        </div>
        <div id="aboutPage" style="display: none;">
            <section class="hero"><div class="hero-icon">ğŸ‘‹</div><h1>å…³äº</h1><p>è®¤è¯†ä¸€ä¸‹</p></section>
            <div class="about-card">
                <div class="about-header">
                    <div class="about-avatar">é»‘</div>
                    <div class="about-info"><h2>å¤§é»‘å¤©</h2><p>å®¤å†…è®¾è®¡å¸ˆ / æ•ˆç‡å·¥å…·çˆ±å¥½è€…</p></div>
                </div>
                <div class="about-tags">
                    <span class="about-tag">ç©ºé—´è®¾è®¡</span><span class="about-tag">å»ºç­‘è®¾è®¡</span><span class="about-tag">å®¤å†…è®¾è®¡</span>
                    <span class="about-tag">å•†ä¸š</span><span class="about-tag">é˜…è¯»</span><span class="about-tag">æ•ˆç‡å·¥å…·</span>
                </div>
                <div class="about-content">
                    <div class="about-item"><span>ğŸ’¡</span><span>å…³æ³¨ç©ºé—´ã€å»ºç­‘ã€å®¤å†…è®¾è®¡çš„å®¤å†…è®¾è®¡å¸ˆ</span></div>
                    <div class="about-item"><span>â˜ï¸</span><span>ä¹Ÿè¿˜å…³æ³¨å–œæ¬¢ï¼šå•†ä¸šã€é˜…è¯»ã€æ€è€ƒã€æŠ˜è…¾ã€æ•™è‚²ã€åŠå…¬</span></div>
                    <div class="about-item"><span>ğŸŒ²</span><span>è½¯ä»¶æ•ˆç‡å·¥å…·çˆ±å¥½è€…</span></div>
                    <div class="about-item"><span>ğŸŒ²</span><span>ä¼˜è´¨ä¿¡æ¯çˆ±å¥½è€…</span></div>
                </div>
            </div>
        </div>
    </main>

    <footer><p>åŒæ­¥è‡ª <a href="https://okjk.co/ZrdvaB" target="_blank">å³åˆ»</a> Â· å®æ—¶æ›´æ–° Â· è‡ªåŠ¨é‡è¯•æœºåˆ¶</p></footer>

    <div class="modal-overlay" id="modal">
        <div class="modal">
            <div class="modal-header">
                <span class="modal-title">ğŸ² éšæœºä¸€æ¡</span>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        const RSS_URL = 'https://rsshub.app/jike/user/16120E35-EB4B-4FF1-9DBC-9BEFC1D16CCD';
        const REFRESH_INTERVAL = 3 * 60 * 1000;
        const RETRY_DELAY = 5000;

        let posts = [];
        let retryCount = 0;
        let autoRefreshInterval = null;

        // å®‰å…¨ localStorage
        let ls = null;
        try { ls = window.localStorage; } catch (e) { console.warn('localStorage ä¸å¯ç”¨ï¼ˆsandboxï¼‰ï¼Œç¼“å­˜å·²ç¦ç”¨'); }

        // é¡µé¢ & ä¸»é¢˜ï¼ˆä¸å˜ï¼‰
        const navLinks = document.querySelectorAll('nav a[data-page]');
        const homePage = document.getElementById('homePage');
        const aboutPage = document.getElementById('aboutPage');
        navLinks.forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const page = link.dataset.page;
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                homePage.style.display = page === 'home' ? 'block' : 'none';
                aboutPage.style.display = page === 'about' ? 'block' : 'none';
            });
        });

        const themeBtn = document.getElementById('themeBtn');
        const sunIcon = document.getElementById('sunIcon');
        const moonIcon = document.getElementById('moonIcon');
        const html = document.documentElement;
        const savedTheme = ls ? (ls.getItem('theme') || 'dark') : 'dark';
        html.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);
        themeBtn.addEventListener('click', () => {
            const current = html.getAttribute('data-theme');
            const newTheme = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            if (ls) ls.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });
        function updateThemeIcon(theme) {
            sunIcon.style.display = theme === 'dark' ? 'block' : 'none';
            moonIcon.style.display = theme === 'dark' ? 'none' : 'block';
        }

        // è¾…åŠ©å‡½æ•°ï¼ˆå®Œæ•´ï¼‰
        function formatTime(d) { if (!d) return '-'; const date = new Date(d), now = new Date(), diff = now - date; const m = Math.floor(diff/60000), h = Math.floor(diff/3600000), da = Math.floor(diff/86400000); if (m<1) return 'åˆšåˆš'; if (m<60) return m+'åˆ†é’Ÿå‰'; if (h<24) return h+'å°æ—¶å‰'; if (da<7) return da+'å¤©å‰'; return date.toLocaleDateString('zh-CN',{month:'short',day:'numeric'}); }
        function formatFullTime(d) { if (!d) return '-'; return new Date(d).toLocaleString('zh-CN',{month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'}); }
        function extractImages(c) { if (!c) return []; const r=/<img[^>]+src="([^"]+)"/g, imgs=[]; let m; while (m=r.exec(c)) imgs.push(m[1]); return imgs; }
        function cleanContent(c) { if (!c) return ''; return c.replace(/<img[^>]+>/g,'').replace(/<[^>]+>/g,'').replace(/&nbsp;/g,' ').replace(/&quot;/g,'"').replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>').trim(); }
        function extractTags(c) { if (!c) return []; const r=/#([^#\s]+)/g, tags=[]; let m; while (m=r.exec(c)) tags.push(m[1]); return tags; }
        function updateStatus(t, type='normal') {
            const s = document.getElementById('status'), st = document.getElementById('statusText');
            st.textContent = t;
            s.classList.remove('syncing','error');
            if (type==='syncing') s.classList.add('syncing');
            if (type==='error') s.classList.add('error');
        }
        function parseRSS(xml) {
            const p = new DOMParser(), doc = p.parseFromString(xml,'text/xml');
            return Array.from(doc.querySelectorAll('item')).map(i => ({
                title: i.querySelector('title')?.textContent || '',
                description: i.querySelector('description')?.textContent || '',
                pubDate: i.querySelector('pubDate')?.textContent || '',
                link: i.querySelector('link')?.textContent || ''
            }));
        }
        function renderPost(item) {
            const imgs = extractImages(item.description), content = cleanContent(item.description).replace(/#([^#\s]+)/g,'').trim(), tags = extractTags(item.description);
            const cls = imgs.length===1?'single':imgs.length===2?'double':'multiple';
            return `<div class="post-header"><div class="post-avatar">é»‘</div><div class="post-meta"><div class="post-author">å¤§é»‘å¤©</div><div class="post-time">${formatFullTime(item.pubDate)} Â· ${formatTime(item.pubDate)}</div></div></div><div class="post-content">${content}</div>${imgs.length?`<div class="post-images ${cls}">${imgs.map(src=>`<img src="${src}" loading="lazy" onerror="this.style.display='none'">`).join('')}</div>`:''}${tags.length?`<div class="post-tags">${tags.map(t=>`<span class="tag">#${t}</span>`).join('')}</div>`:''}`;
        }
        function renderPosts(items) {
            const c = document.getElementById('posts');
            if (!items.length) { c.innerHTML = `<div class="empty"><div class="empty-icon">ğŸ“</div><p>æš‚æ— åŠ¨æ€</p></div>`; return; }
            c.innerHTML = items.map((item,i) => `<article class="post" data-index="${i}">${renderPost(item)}</article>`).join('');
            document.getElementById('postCount').textContent = items.length;
            document.getElementById('updateTime').textContent = formatTime(new Date());
        }

        // ==================== 2026 æœ€æ–°ç¨³å®šä»£ç†åˆ—è¡¨ï¼ˆå…³é”®ä¿®å¤ï¼‰ ====================
        async function fetchRSS() {
            const proxies = [
                `https://api.allorigins.win/raw?url=${encodeURIComponent(RSS_URL)}`,           // æœ€ç¨³å®š
                `https://test.cors.workers.dev/?url=${encodeURIComponent(RSS_URL)}`,         // Cloudflare æ–°å¢
                `https://cors.x2u.in/${RSS_URL}`,                                            // å‰ç¼€å¼ æ–°å¢
                `https://api.cors.lol/?url=${encodeURIComponent(RSS_URL)}`,
                `https://corsproxy.io/?url=${encodeURIComponent(RSS_URL)}`
            ];
            for (const url of proxies) {
                try {
                    console.log(`å°è¯•ä»£ç† â†’ ${url.split('/')[2]}`);
                    const ctrl = new AbortController();
                    const timeout = setTimeout(() => ctrl.abort(), 15000);
                    const res = await fetch(url, { signal: ctrl.signal });
                    clearTimeout(timeout);
                    if (!res.ok) { console.warn(`çŠ¶æ€ ${res.status}`); continue; }
                    const text = await res.text();
                    if (text.includes('<rss') || text.includes('<channel>')) {
                        const items = parseRSS(text);
                        if (items.length > 0) {
                            console.log(`âœ… ${url.split('/')[2]} æˆåŠŸï¼å…± ${items.length} æ¡åŠ¨æ€`);
                            return items;
                        }
                    }
                } catch (e) {
                    console.warn(`ä»£ç†å¤±è´¥: ${url.split('/')[2]}`, e.message);
                }
            }
            throw new Error('æ‰€æœ‰ä»£ç†å‡å¤±è´¥ï¼ˆå»ºè®®å…³é—­ Clash/V2Ray åé‡è¯•ï¼‰');
        }

        // ä¸»è·å–å‡½æ•°ï¼ˆä¼˜åŒ–é”™è¯¯æç¤ºï¼‰
        async function fetchPosts(showLoading = true) {
            const btn = document.getElementById('refreshBtn');
            btn.disabled = true;
            if (showLoading) updateStatus('æ­£åœ¨åŒæ­¥...', 'syncing');
            try {
                const items = await fetchRSS();
                posts = items;
                renderPosts(posts);
                updateStatus('å®æ—¶åŒæ­¥ä¸­');
                if (ls) ls.setItem('jikePosts', JSON.stringify({posts, timestamp: Date.now()}));
            } catch (e) {
                console.error(e);
                if (ls) {
                    const cached = ls.getItem('jikePosts');
                    if (cached) {
                        try {
                            const data = JSON.parse(cached);
                            if (data.posts?.length) {
                                posts = data.posts;
                                renderPosts(posts);
                                updateStatus('æ˜¾ç¤ºç¼“å­˜æ•°æ®');
                                return;
                            }
                        } catch (_) {}
                    }
                }
                updateStatus('åŒæ­¥å¤±è´¥', 'error');
                document.getElementById('posts').innerHTML = `
                    <div class="error">
                        <div class="error-icon">âš ï¸</div>
                        <h3>åŠ è½½å¤±è´¥</h3>
                        <p>ä»£ç†è¢«é™æµæˆ–æœ¬åœ° Clash æ‹¦æˆª<br><br>
                        å»ºè®®ï¼š<br>
                        1. æš‚æ—¶å…³é—­ Clash / V2Ray<br>
                        2. æ‰©å±•ç¨‹åºé”™è¯¯å¯å¿½ç•¥<br>
                        3. ç‚¹å‡»ä¸‹æ–¹é‡è¯•</p>
                        <button class="retry-btn" onclick="fetchPosts(true)">é‡æ–°åŠ è½½</button>
                    </div>`;
            } finally { btn.disabled = false; }
        }

        // éšæœºå¼¹çª— & åˆ·æ–° & è‡ªåŠ¨åˆ·æ–°ï¼ˆä¸å˜ï¼‰
        const modal = document.getElementById('modal'), modalBody = document.getElementById('modalBody');
        document.getElementById('randomBtn').addEventListener('click', () => {
            if (!posts.length) return;
            modalBody.innerHTML = renderPost(posts[Math.floor(Math.random()*posts.length)]);
            modal.classList.add('active');
        });
        document.getElementById('modalClose').addEventListener('click', () => modal.classList.remove('active'));
        modal.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('active'); });

        document.getElementById('refreshBtn').addEventListener('click', () => { retryCount = 0; fetchPosts(true); });
        function startAutoRefresh() { if (autoRefreshInterval) clearInterval(autoRefreshInterval); autoRefreshInterval = setInterval(() => fetchPosts(false), REFRESH_INTERVAL); }

        function loadFromCache() {
            if (!ls) return false;
            const c = ls.getItem('jikePosts');
            if (c) {
                try {
                    const d = JSON.parse(c);
                    if (d.posts?.length && Date.now() - d.timestamp < 3600000) {
                        posts = d.posts;
                        renderPosts(posts);
                        updateStatus('æ˜¾ç¤ºç¼“å­˜æ•°æ®');
                        return true;
                    }
                } catch (_) {}
            }
            return false;
        }

        function init() {
            const hasCache = loadFromCache();
            fetchPosts(!hasCache);
            startAutoRefresh();
        }
        init();
    </script>
</body>
</html>
